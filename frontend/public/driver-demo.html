<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Portal Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <div id="app"></div>
    
    <script>
        const API_URL = 'https://logistics-nano.emergent.host';
        let currentView = 'login';
        let currentUser = null;
        let loads = [];
        let selectedLoad = null;

        // Mock data for demo
        const mockLoads = [
            {
                id: '1',
                order_number: 'ORD-2024-001',
                status: 'pending',
                pickup_location: '123 Warehouse St',
                delivery_location: '456 Distribution Ave',
                pickup_city: 'Los Angeles',
                pickup_state: 'CA',
                delivery_city: 'Phoenix',
                delivery_state: 'AZ',
                commodity: 'Electronics',
                weight: 15000,
                confirmed_rate: 2500
            },
            {
                id: '2',
                order_number: 'ORD-2024-002',
                status: 'planned',
                pickup_location: '789 Factory Rd',
                delivery_location: '321 Retail Blvd',
                pickup_city: 'San Diego',
                pickup_state: 'CA',
                delivery_city: 'Las Vegas',
                delivery_state: 'NV',
                commodity: 'Furniture',
                weight: 20000,
                confirmed_rate: 1800
            },
            {
                id: '3',
                order_number: 'ORD-2024-003',
                status: 'in_transit_delivery',
                pickup_location: '555 Industrial Pkwy',
                delivery_location: '888 Shopping Center',
                pickup_city: 'Sacramento',
                pickup_state: 'CA',
                delivery_city: 'Reno',
                delivery_state: 'NV',
                commodity: 'Food & Beverage',
                weight: 18000,
                confirmed_rate: 2200
            }
        ];

        function getStatusColor(status) {
            const colors = {
                pending: 'bg-yellow-100 text-yellow-800',
                planned: 'bg-blue-100 text-blue-800',
                in_transit_pickup: 'bg-purple-100 text-purple-800',
                at_pickup: 'bg-cyan-100 text-cyan-800',
                in_transit_delivery: 'bg-purple-100 text-purple-800',
                at_delivery: 'bg-cyan-100 text-cyan-800',
                delivered: 'bg-green-100 text-green-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        function getStatusLabel(status) {
            return status.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
        }

        function getNextStatus(currentStatus) {
            const flow = {
                pending: 'planned',
                planned: 'in_transit_pickup',
                in_transit_pickup: 'at_pickup',
                at_pickup: 'in_transit_delivery',
                in_transit_delivery: 'at_delivery',
                at_delivery: 'delivered'
            };
            return flow[currentStatus];
        }

        function renderLogin() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <h1 class="text-3xl font-bold text-gray-900 mb-2">Driver Portal</h1>
                            <p class="text-gray-600">Demo Interface - Sign in to continue</p>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input
                                    type="email"
                                    id="email"
                                    value="demo.driver@example.com"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Email"
                                />
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                <input
                                    type="password"
                                    id="password"
                                    value="Demo@123"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Password"
                                />
                            </div>

                            <button
                                onclick="handleLogin()"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200"
                            >
                                Sign In (Demo Mode)
                            </button>
                        </div>

                        <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                            <p class="text-sm text-blue-800">
                                <i class="fas fa-info-circle mr-2"></i>
                                <strong>Demo Mode:</strong> This is a demonstration of the Driver Portal interface. Click "Sign In" to explore the features.
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDashboard() {
            return `
                <div class="min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm border-b border-gray-200">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h1 class="text-2xl font-bold text-gray-900">My Loads</h1>
                                    <p class="text-sm text-gray-600 mt-1">Welcome, Demo Driver</p>
                                </div>
                                <div class="flex items-center gap-3">
                                    <button
                                        onclick="currentView='profile'; render();"
                                        class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                                        title="Profile"
                                    >
                                        <i class="fas fa-user text-gray-600"></i>
                                    </button>
                                    <button
                                        onclick="handleLogout()"
                                        class="flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors"
                                    >
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span class="text-sm font-medium">Logout</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        ${loads.length === 0 ? `
                            <div class="bg-white rounded-lg shadow-sm p-12 text-center">
                                <i class="fas fa-truck text-gray-400 text-6xl mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-900 mb-2">No loads assigned</h3>
                                <p class="text-gray-600">You don't have any loads assigned at the moment.</p>
                                <button onclick="loads = [...mockLoads]; render();" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Load Demo Data
                                </button>
                            </div>
                        ` : `
                            <div class="grid gap-4">
                                ${loads.map(load => `
                                    <div
                                        onclick="selectedLoad = '${load.id}'; currentView = 'details'; render();"
                                        class="bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer border border-gray-200"
                                    >
                                        <div class="flex justify-between items-start mb-4">
                                            <div class="flex items-center gap-3">
                                                <div class="p-2 bg-blue-50 rounded-lg">
                                                    <i class="fas fa-box text-blue-600"></i>
                                                </div>
                                                <div>
                                                    <h3 class="text-lg font-semibold text-gray-900">${load.order_number}</h3>
                                                    <span class="inline-block px-3 py-1 rounded-full text-xs font-medium mt-1 ${getStatusColor(load.status)}">
                                                        ${getStatusLabel(load.status)}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="space-y-3">
                                            <div class="flex items-start gap-3">
                                                <i class="fas fa-map-marker-alt text-green-600 mt-1"></i>
                                                <div class="flex-1">
                                                    <p class="text-xs text-gray-500 uppercase font-medium">Pickup</p>
                                                    <p class="text-sm text-gray-900">${load.pickup_city}, ${load.pickup_state}</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start gap-3">
                                                <i class="fas fa-map-marker-alt text-red-600 mt-1"></i>
                                                <div class="flex-1">
                                                    <p class="text-xs text-gray-500 uppercase font-medium">Delivery</p>
                                                    <p class="text-sm text-gray-900">${load.delivery_city}, ${load.delivery_state}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="mt-4 pt-4 border-t border-gray-100">
                                            <p class="text-sm text-gray-600">
                                                <span class="font-medium">Commodity:</span> ${load.commodity}
                                                â€¢ ${load.weight} lbs
                                            </p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </main>
                </div>
            `;
        }

        function renderDetails() {
            const load = loads.find(l => l.id === selectedLoad);
            if (!load) return renderDashboard();

            const nextStatus = getNextStatus(load.status);

            return `
                <div class="min-h-screen bg-gray-50">
                    <header class="bg-blue-600 text-white p-6">
                        <div class="max-w-4xl mx-auto">
                            <button
                                onclick="currentView='dashboard'; render();"
                                class="flex items-center gap-2 text-white hover:text-blue-100 mb-4 transition-colors"
                            >
                                <i class="fas fa-arrow-left"></i>
                                <span class="text-sm">Back to Loads</span>
                            </button>
                            <h1 class="text-2xl font-bold">${load.order_number}</h1>
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-medium mt-2 ${getStatusColor(load.status)}">
                                ${getStatusLabel(load.status)}
                            </span>
                        </div>
                    </header>

                    <main class="max-w-4xl mx-auto px-4 py-8 space-y-6">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                <i class="fas fa-map-marker-alt text-blue-600"></i>
                                Route Information
                            </h2>
                            <div class="space-y-4">
                                <div class="flex items-start gap-3 p-4 bg-green-50 rounded-lg">
                                    <i class="fas fa-map-marker-alt text-green-600 mt-1"></i>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-green-900 mb-1">Pickup Location</p>
                                        <p class="text-sm text-gray-700">${load.pickup_location}</p>
                                        <p class="text-xs text-gray-600 mt-1">${load.pickup_city}, ${load.pickup_state}</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 p-4 bg-red-50 rounded-lg">
                                    <i class="fas fa-map-marker-alt text-red-600 mt-1"></i>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-red-900 mb-1">Delivery Location</p>
                                        <p class="text-sm text-gray-700">${load.delivery_location}</p>
                                        <p class="text-xs text-gray-600 mt-1">${load.delivery_city}, ${load.delivery_state}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                <i class="fas fa-box text-blue-600"></i>
                                Cargo Details
                            </h2>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <p class="text-sm text-gray-600 mb-1">Commodity</p>
                                    <p class="text-base font-medium text-gray-900">${load.commodity}</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-600 mb-1">Weight</p>
                                    <p class="text-base font-medium text-gray-900">${load.weight} lbs</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h2 class="text-lg font-semibold text-gray-900 mb-4">Rate Information</h2>
                            <div>
                                <p class="text-sm text-gray-600 mb-1">Confirmed Rate</p>
                                <p class="text-2xl font-bold text-green-600">$${load.confirmed_rate}</p>
                            </div>
                        </div>

                        <div class="space-y-3">
                            ${load.status === 'pending' ? `
                                <button
                                    onclick="handleAcceptLoad('${load.id}')"
                                    class="w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-check-circle"></i>
                                    Accept Load
                                </button>
                            ` : ''}

                            ${nextStatus && load.status !== 'delivered' ? `
                                <button
                                    onclick="handleUpdateStatus('${load.id}', '${nextStatus}')"
                                    class="w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-arrow-up"></i>
                                    Update to: ${getStatusLabel(nextStatus)}
                                </button>
                            ` : ''}

                            ${load.status !== 'pending' ? `
                                <button
                                    onclick="handleNavigation('${load.id}')"
                                    class="w-full flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-map-marked-alt"></i>
                                    Start Navigation
                                </button>
                            ` : ''}
                        </div>
                    </main>
                </div>
            `;
        }

        function renderProfile() {
            return `
                <div class="min-h-screen bg-gray-50">
                    <header class="bg-blue-600 text-white p-6">
                        <div class="max-w-4xl mx-auto">
                            <button
                                onclick="currentView='dashboard'; render();"
                                class="flex items-center gap-2 text-white hover:text-blue-100 mb-4 transition-colors"
                            >
                                <i class="fas fa-arrow-left"></i>
                                <span class="text-sm">Back to Dashboard</span>
                            </button>
                            <h1 class="text-2xl font-bold">My Profile</h1>
                        </div>
                    </header>

                    <main class="max-w-4xl mx-auto px-4 py-8 space-y-6">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center">
                                    <span class="text-2xl font-bold text-blue-600">D</span>
                                </div>
                                <div class="flex-1">
                                    <h2 class="text-xl font-bold text-gray-900">Demo Driver</h2>
                                    <p class="text-sm text-gray-600 uppercase">Driver</p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                    <i class="fas fa-envelope text-gray-600"></i>
                                    <div class="flex-1">
                                        <p class="text-xs text-gray-500 uppercase font-medium">Email</p>
                                        <p class="text-sm text-gray-900">demo.driver@example.com</p>
                                    </div>
                                </div>

                                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                    <i class="fas fa-phone text-gray-600"></i>
                                    <div class="flex-1">
                                        <p class="text-xs text-gray-500 uppercase font-medium">Phone</p>
                                        <p class="text-sm text-gray-900">555-1234</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Account Status</h3>
                            <div class="flex items-center gap-3 p-4 bg-green-100 rounded-lg">
                                <i class="fas fa-check-circle text-green-600"></i>
                                <div class="flex-1">
                                    <p class="text-sm font-semibold text-green-800">Verified</p>
                                    <p class="text-xs text-gray-600 mt-1">Your account is active and verified.</p>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }

        function handleLogin() {
            currentUser = { name: 'Demo Driver', email: 'demo.driver@example.com' };
            currentView = 'dashboard';
            loads = [];
            render();
        }

        function handleLogout() {
            currentUser = null;
            currentView = 'login';
            loads = [];
            selectedLoad = null;
            render();
        }

        function handleAcceptLoad(loadId) {
            const load = loads.find(l => l.id === loadId);
            if (load) {
                load.status = 'planned';
                alert('Load accepted successfully!');
                render();
            }
        }

        function handleUpdateStatus(loadId, newStatus) {
            const load = loads.find(l => l.id === loadId);
            if (load) {
                load.status = newStatus;
                alert('Status updated successfully!');
                render();
            }
        }

        function handleNavigation(loadId) {
            const load = loads.find(l => l.id === loadId);
            if (load) {
                const origin = `${load.pickup_location}, ${load.pickup_city}, ${load.pickup_state}`;
                const dest = `${load.delivery_location}, ${load.delivery_city}, ${load.delivery_state}`;
                const url = `https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(dest)}&travelmode=driving`;
                window.open(url, '_blank');
            }
        }

        function render() {
            const app = document.getElementById('app');
            let html = '';
            
            switch(currentView) {
                case 'login':
                    html = renderLogin();
                    break;
                case 'dashboard':
                    html = renderDashboard();
                    break;
                case 'details':
                    html = renderDetails();
                    break;
                case 'profile':
                    html = renderProfile();
                    break;
            }
            
            app.innerHTML = html;
        }

        // Initial render
        render();
    </script>
</body>
</html>
