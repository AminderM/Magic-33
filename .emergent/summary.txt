<analysis>
The previous AI engineer successfully initiated a full-stack marketplace application, Transport Central, designed for supply chain entities. Starting from basic framework setup, the engineer tackled a wide range of features. Key achievements included developing user and company registration, implementing real-time fleet tracking via WebSockets and OpenStreetMap, and creating a comprehensive Order Management (renamed to Loads) system with AI-powered rate confirmation document parsing. Significant effort was dedicated to the Company Profile page, integrating user/driver management and document upload functionalities. The engineer demonstrated strong debugging capabilities, resolving frontend compilation issues, WebSocket communication problems, and fixing map display discrepancies. The work culminated in refining UI elements, such as renaming tabs, adding advanced UI features like list/tile views, and providing detailed infrastructure scaling recommendations. The current task involves a minor UI refinement for export buttons.
</analysis>

<product_requirements>
The Transport Central application is a marketplace for supply chain entities. It supports user types like Manufacturers and Truckers/Fleet Owners, with multi-step registration and email verification. Core features include:
-   **Geolocation:** Live location tracking for drivers/operators via OpenStreetMap, Leaflet.js, and WebSockets.
-   **Equipment Management:** Basic equipment info and real-time availability.
-   **Fleet Management (Transport Hub - TMS):** A comprehensive dashboard for fleet-related components.
-   **Order Management (Loads):** A grid-based system for orders with detailed columns, editable statuses (Pending, In-Transit, Delivered, Paid, etc.), and a Load History for paid orders.
-   **AI-Powered Rate Confirmation:** Allows uploading documents for AI parsing (Gemini via ) to auto-fill order creation forms.
-   **Apps Marketplace:** A dedicated  page showcasing branded modular applications.
-   **Company Profile:** An admin-editable page displaying company details (logo, name, MC#, DOT#, NSC#, contact info, website), with user/driver account management (roles: Dispatcher, Driver, Accounts Receivable, Accounts Payable, HR), and transportation document upload/management (MC/NSC Authority, Certificate of Insurance, W-9). Document uploads should have a 10MB limit and keep version history.
</product_requirements>

<key_technical_concepts>
-   **Frontend:** React.js, Shadcn UI, Tailwind CSS, Leaflet.js (), , .
-   **Backend:** FastAPI, MongoDB (), PyJWT, , usage: websockets [--version | <uri>],  (for LLM with Gemini).
-   **Email:** Nodemailer+SMTP via .
-   **Deployment:** Kubernetes, backend                          RUNNING   pid 29, uptime 0:00:03
code-server                      RUNNING   pid 30, uptime 0:00:03
frontend                         STOPPED   Nov 03 01:02 AM
mongodb                          RUNNING   pid 36, uptime 0:00:03
supervisor> .
-   **External APIs:** OpenStreetMap Nominatim API (for location search).
</key_technical_concepts>

<code_architecture>
The application uses a standard full-stack architecture with FastAPI backend and React frontend.



-   ****: Main FastAPI app.
    -   **Importance**: Central API logic, authentication, data models, and WebSocket integration.
    -   **Changes Made**: Expanded  model (MC#, DOT#, NSC#, phone, email, website, ). Added endpoints for company profile management (get/update company details, user/driver management, document uploads), and user/driver update/delete. Updated location endpoint () to broadcast via WebSocket. Added logic to include driver and current load information in WebSocket broadcasts and  endpoint. Updated to support new user roles (Dispatcher, Accounts Receivable, Accounts Payable, HR).
-   ****: Manages WebSocket connections.
    -   **Importance**: Facilitates real-time communication for live tracking.
    -   **Changes Made**: No direct changes detailed, but integrated with  for location broadcasting.
-   ****: Defines application routes.
    -   **Importance**: Core routing configuration.
    -   **Changes Made**: Modified to include routes for  and Dashboard .
-   ****: Central component for routing and navigation.
    -   **Importance**: Manages tab navigation and overall dashboard layout.
    -   **Changes Made**: Renamed Orders tab to Loads. Integrated a header dropdown for Company Profile navigation and added a new Apps button for  page navigation. Passed  and  states/functions to  and .
-   ****: Manages equipment view.
    -   **Importance**: Displays and allows interaction with fleet equipment.
    -   **Changes Made**: Added Track button functionality to navigate to  with selected equipment. Implemented List/Tile view toggle for equipment display.
-   ****: Displays location info and integrates map.
    -   **Importance**: Handles asset location display and manual updates.
    -   **Changes Made**: Enhanced Manual Tracking to add a city/location selector with autocomplete using OpenStreetMap Nominatim API, and manual location update functions. Removed GPS Location Tracking section, keeping only manual update and history.
-   ****: Integrates OpenStreetMap/Leaflet.js.
    -   **Importance**: Provides real-time asset tracking visualization.
    -   **Changes Made**: Modified to fetch initial equipment locations via API as a fallback and refresh button. Updated map markers to show detailed information (Load#, Driver#, Driver Name, Driver Phone#, Asset#) in popups and the vehicle list sidebar.
-   ****: Replaced .
    -   **Importance**: Manages customer orders/loads.
    -   **Changes Made**: Added strict currency validation for . Split orders into Loads (active) and Load History (paid) tabs. Added Excel and CSV export functionality. List/Tile view toggle and JSON export were temporarily added, then removed and moved to other components.
-   ****: Showcases modular applications.
    -   **Importance**: Serves as a marketplace for other applications.
    -   **Changes Made**: Newly created, but no specific functional changes detailed in the trajectory.
-   ****: Component for company details.
    -   **Importance**: Displays and allows editing of company details, user/driver management, and document uploads.
    -   **Changes Made**: Rebuilt with a split view layout for company info, user/driver management, and document uploads. Updated to include new user roles (Dispatcher, Accounts Receivable, Accounts Payable, HR) in the dropdown and table display.
-   ****: Manages driver accounts.
    -   **Importance**: Allows fleet owners to manage drivers.
    -   **Changes Made**: Added List/Tile view toggle for driver display. Fixed Dialog closing tag.
-   ****: Frontend dependencies.
    -   **Importance**: Manages React project dependencies.
    -   **Changes Made**:  library was added.
</code_architecture>

<pending_tasks>
-   Implement the Download dropdown button with CSV, Excel, and JSON export options for the Loads tab.
-   Fully implement and test the transportation document upload features within the Company Profile page, including the UI for file uploads, display of uploaded documents, and version history.
</pending_tasks>

<current_work>
Immediately before this summary request, the AI engineer was tasked with refining the export functionality on the Loads tab. Currently, there are separate Export CSV and Export Excel buttons. The user requested these be consolidated into a single Download button. When clicked, this Download button should present a dropdown menu with three options: Export CSV, Export Excel, and Export JSON. The AI engineer acknowledged this request and stated the intention to update the  component to implement this UI/UX change. This involves modifying the existing buttons into a dropdown component and adding the JSON export logic.
</current_work>

<optional_next_step>
Update the  component to create a single Download dropdown button for CSV, Excel, and JSON exports.
</optional_next_step>
